export const ZEAL65 = `[{c:"#ffe9d4",t:"#ba8080",a:6},"Esc",{c:"#f7f2ea",a:4},"!\n1","@\n2","#\n3","$\n4","%\n5","^\n6","&\n7","*\n8","(\n9",")\n0","_\n-","+\n=",{c:"#ba8080",t:"#f7f2ea",a:6,w:2},"Backspace","Home"],
[{w:1.5},"Tab",{c:"#f7f2ea",t:"#ba8080",a:4,f:7},"Q","W","E","R","T","Y","U","I","O","P",{f:3},"{\n[","}\n]",{c:"#ba8080",t:"#f7f2ea",w:1.5},"|\n\\",{a:6},"PgUp"],
[{w:1.75},"Caps Lock",{c:"#f7f2ea",t:"#ba8080",a:4,f:7},"A","S","D","F","G","H","J","K","L",{f:3},":\n;","\"\n'",{c:"#ffe9d4",a:6,w:2.25},"Enter",{c:"#ba8080",t:"#f7f2ea"},"PgDn"],
[{w:2.25},"Shift",{c:"#f7f2ea",t:"#ba8080",a:4,f:7},"Z","X","C","V","B","N","M",{f:3},"<\n,",">\n.","?\n/",{c:"#ba8080",t:"#f7f2ea",a:6,w:1.75},"Shift","↑","Fn"],
[{w:1.5},"Ctrl",{w:1.5},"Alt",{c:"#f7f2ea",t:"#ba8080",a:7,w:7},"",{c:"#ba8080",t:"#f7f2ea",a:6,w:1.5},"Alt",{w:1.5},"Ctrl","←","↓","→"]`;

export const HHKB = `[{c:"#9c9c9c",t:"#f7f2ea",p:"OEM"},"Esc",{c:"#d6b2b2"},"!\n1","@\n2","#\n3","$\n4","%\n5","^\n6","&\n7","*\n8","(\n9",")\n0","_\n-","+\n=","|\n\\",{c:"#f7f2ea",t:"#9c9c9c"},"~\n\`"],
[{w:1.5},"Tab",{c:"#7890a1",t:"#f7f2ea"},"Q","W","E","R","T","Y","U","I","O","P","{\n[","}\n]",{c:"#f7f2ea",t:"#9c9c9c",w:1.5},"Delete"],
[{w:1.75},"Control",{c:"#dae8f5"},"A","S","D","F","G","H","J","K","L",":\n;","\"\n'",{c:"#f7f2ea",w:2.25},"Enter"],
[{w:2.25},"Shift",{c:"#dae8f5"},"Z","X","C","V","B","N","M","<\n,",">\n.","?\n/",{c:"#f7f2ea",w:1.75},"Shift","Fn"],
[{x:1.5},"LAlt",{w:1.5},"LMeta",{c:"#9c9c9c",t:"#f7f2ea",a:7,w:7},"",{c:"#f7f2ea",t:"#9c9c9c",a:4,w:1.5},"RMeta","RAlt"]`;

export const M60_A = `[{c:"#4d525a",t:"#e2e2e2"},"Esc",{c:"#e2e2e2",t:"#4d525a"},"!\n1","@\n2","#\n3","$\n4","%\n5","^\n6","&\n7","*\n8","(\n9",")\n0","_\n-","+\n=","|\n\\",{c:"#4d525a",t:"#e2e2e2"},"n"],
[{w:1.5},"Tab",{c:"#e2e2e2",t:"#363636"},"Q","W","E","R","T","Y","U","I","O","P","{\n[","}\n]",{c:"#4d525a",t:"#e2e2e2",w:1.5},"Backspace"],
[{c:"#f5cb01",t:"#4d525a",w:1.75},"Control",{c:"#e2e2e2",t:"#363636"},"A","S","D","F","G","H","J","K","L",":\n;","\"\n'",{c:"#4d525a",t:"#e2e2e2",w:2.25},"Enter"],
[{w:2.25},"Shift",{c:"#e2e2e2",t:"#363636"},"Z","X","C","V","B","N","M","<\n,",">\n.","?\n/",{c:"#4d525a",t:"#e2e2e2",w:1.75},"Shift",{c:"#f5cb01",t:"#4d525a"},"Fn"],
[{x:1.5,c:"#4d525a",t:"#e2e2e2"},"Alt",{w:1.5},"Meta",{c:"#e2e2e2",t:"#4d525a",a:7,w:6.25},"",{c:"#4d525a",t:"#e2e2e2",a:4,w:1.5},"Meta","Alt"]`;

export const M6A = `[{c:"#505557",t:"#d9d7d7",a:7},"x","x","x"],
["x","x","x"]`;

export const M6B = `["Q","W","E"],
["Z","X","C"]`;

export const LAYOUT_zeal60_all = `[{c:"#ba8080",t:"#ffe6d4"},"x",{c:"#f7f2ea",t:"#ba8080"},"x","x","x","x","x","x","x","x","x","x","x","x","x",{c:"#ffe6d4"},"x"],
[{w:1.5},"x",{c:"#f7f2ea"},"x","x","x","x","x","x","x","x","x","x","x","x",{c:"#ffe6d4",w:1.5},"x"],
[{w:1.75},"x",{c:"#f7f2ea"},"x","x","x","x","x","x","x","x","x","x","x",{c:"#ba8080",t:"#ffe6d4",w:2.25},"x"],
[{c:"#ffe6d4",t:"#ba8080",w:1.25},"x","x",{c:"#f7f2ea"},"x","x","x","x","x","x","x","x","x","x",{c:"#ffe6d4",w:1.75},"x","x"],
[{w:1.25},"x",{w:1.25},"x",{w:1.25},"x",{c:"#f7f2ea",w:6.25},"x",{c:"#ffe6d4",w:1.25},"x",{w:1.25},"x",{w:1.25},"x",{w:1.25},"x"]`;

export const LAYOUT_zeal65_split_bs = `["x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x"],
[{w:1.5},"x","x","x","x","x","x","x","x","x","x","x","x","x",{w:1.5},"x","x"],
[{w:1.75},"x","x","x","x","x","x","x","x","x","x","x","x",{w:2.25},"x","x"],
[{w:2.25},"x","x","x","x","x","x","x","x","x","x","x",{w:1.75},"x","x","x"],
[{w:1.5},"x",{w:1.5},"x",{w:7},"x",{w:1.5},"x",{w:1.5},"x","x","x","x"]`;

export const LAYOUT_zeal65_split_bs_olivia = `[{c:"#DEBFB3",t:"#363636"},"Esc",{c:"#ebebeb"},"!\n1","@\n2","#\n3","$\n4","%\n5","^\n6","&\n7","*\n8","(\n9",")\n0","_\n-","+\n=",{c:"#363636",t:"#DEBFB3"},"PrtSc","Pause\nBreak","Num Lock"],
[{w:1.5},"Tab",{c:"#ebebeb",t:"#363636"},"Q","W","E","R","T","Y","U","I","O","P","{\n[","}\n]",{c:"#363636",t:"#DEBFB3",w:1.5},"|\n\\","Insert"],
[{w:1.75},"Caps Lock",{c:"#ebebeb",t:"#363636"},"A","S","D","F","G","H","J","K","L",":\n;","\"\n'",{c:"#363636",t:"#DEBFB3",w:2.25},"Enter","Home"],
[{w:2.25},"Shift",{c:"#ebebeb",t:"#363636"},"Z","X","C","V","B","N","M","<\n,",">\n.","?\n/",{c:"#363636",t:"#DEBFB3",w:1.75},"Shift",{c:"#DEBFB3",t:"#363636"},"↑",{c:"#363636",t:"#DEBFB3"},"/"],
[{w:1.5},"Ctrl",{w:1.5},"Alt",{c:"#DEBFB3",t:"#000000",a:7,w:7},"",{c:"#363636",t:"#DEBFB3",a:4,w:1.5},"Alt",{w:1.5},"Ctrl",{c:"#DEBFB3",t:"#363636"},"←","↓","→"]`;

export function parseKLERaw(kle: string) {
  const kleArr = kle.split(',\n');
  return kleArr.reduce(
    (prev, kle) => {
      const row = kle
        .replace(/\n/g, '\\n')
        .replace(/\\/g, '\\\\')
        .replace(/\"\"(?!,)/g, '"\\"')
        .replace(/([{,])([A-Za-z])(:)/g, '$1"$2"$3');
      const parsedRow = JSON.parse(row).reduce(
        ({size, margin, res, c, t}, n) => {
          // Check if object and apply formatting
          if (typeof n !== 'string') {
            let obj = {c, t, res};
            if (n.w > 1) {
              obj = {...obj, size: 100 * n.w};
            }
            if (n.x > 0) {
              obj = {...obj, margin: 100 * n.x};
            }
            if (typeof n.c === 'string') {
              obj = {...obj, c: n.c};
            }
            if (typeof n.t === 'string') {
              obj = {...obj, t: n.t};
            }
            return obj;
          } else if (typeof n === 'string') {
            return {
              margin: 0,
              size: 100,
              c,
              t,
              res: [...res, {c, t, label: n, size, margin}]
            };
          }
          return {margin, size, c, t, res};
        },
        {...prev.prevFormatting, margin: 0, size: 100, res: []}
      );
      return {
        prevFormatting: {c: parsedRow.c, t: parsedRow.t},
        res: [...prev.res, parsedRow.res]
      };
    },
    {prevFormatting: {c: '#f5f5f5', t: '#444444'}, res: []}
  ).res;
}
